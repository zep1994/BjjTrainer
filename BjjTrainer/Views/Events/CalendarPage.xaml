<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:BjjTrainer.ViewModels.Events"
             x:Class="BjjTrainer.Views.Events.CalendarPage"
             Title="CalendarPage">

    <ContentPage.BindingContext>
        <local:CalendarViewModel />
    </ContentPage.BindingContext>

    <ContentPage.Resources>
        <!-- Styles for Labels -->
        <Style TargetType="Label">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="TextColor" Value="Black"/>
        </Style>
        <!-- Card Style -->
        <Style TargetType="Frame">
            <Setter Property="Padding" Value="10"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="HasShadow" Value="True"/>
            <Setter Property="BorderColor" Value="LightGray"/>
            <Setter Property="Margin" Value="10,5"/>
        </Style>
        <x:Double x:Key="boxSize">50</x:Double>

    </ContentPage.Resources>

    <StackLayout Padding="10" Spacing="10">
        <!-- Page Header -->
        <Label Text="Events"
               FontSize="24"
               FontAttributes="Bold"
               TextColor="Black"
               HorizontalOptions="Center"
               Margin="0,10,0,20" />

        <!-- Navigation Buttons -->
        <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="20">
            <Button Text="Previous" Command="{Binding ChangeYearMonthCommand}" CommandParameter="Previous" />
            <Button Text="Next" Command="{Binding ChangeYearMonthCommand}" CommandParameter="Next" />
        </StackLayout>

        <!-- Event Cards -->
        <CollectionView 
            ItemsSource="{Binding Events}" 
            Margin="0,20,0,0" 
            VerticalOptions="FillAndExpand">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame>
                        <StackLayout Spacing="5">
                            <!-- Event Title -->
                            <Label Text="{Binding Title}" 
                                   FontSize="18" 
                                   FontAttributes="Bold" 
                                   TextColor="Black" />

                            <!-- Start and End Dates -->
                            <StackLayout Orientation="Horizontal" Spacing="5">
                                <Label Text="Start:" FontSize="14" TextColor="Gray" />
                                <Label Text="{Binding FormattedStartDate}" FontSize="14" TextColor="Gray" />
                                <Label Text="End:" FontSize="14" TextColor="Gray" />
                                <Label Text="{Binding FormattedEndDate}" FontSize="14" TextColor="Gray" />
                            </StackLayout>

                            <!-- Event Description -->
                            <Label Text="{Binding ShortDescription}" 
                                   FontSize="14" 
                                   TextColor="Gray"
                                   LineBreakMode="TailTruncation"
                                   MaxLines="3"
                                   Margin="0,5,0,0" />
                        </StackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </StackLayout>
</ContentPage>
